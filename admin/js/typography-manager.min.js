!function(){"use strict";const e={init:function(){this.parseExistingValues(),this.bindEvents(),this.bindDisplayToggles(),this.updatePreview(),this.updateSectionVisibility()},parseExistingValues:function(){const e={title:"24px",date:"14px",duration:"14px",description:"16px"};["title","date","duration","description"].forEach(t=>{const n=document.getElementById(t+"_font_size");if(n){let o=n.value||e[t];if(o&&o.includes("em")){const e=o.match(/^([\d.]+)em$/i);if(e){const t=parseFloat(e[1]);o=Math.round(16*t)+"px",n.value=o}}const d=o.match(/^([\d.]+)([a-z%]*)$/i);if(d){const e=parseFloat(d[1]),n=d[2]||"px",o=document.getElementById(t+"_font_size_value"),i=document.getElementById(t+"_font_size_unit"),s=document.getElementById(t+"_font_size_range");o&&(o.value=e),i&&(i.value=n),s&&"px"===n&&(s.value=Math.min(72,Math.max(8,e)))}n.remove()}const o=document.getElementById(t+"_line_height");if(o){const e=parseFloat(o.value)||1.5,n=document.getElementById(t+"_line_height_value"),d=document.getElementById(t+"_line_height_range");n&&(n.value=e),d&&(d.value=e),o.remove()}})},bindEvents:function(){document.querySelectorAll(".typo-control").forEach(e=>{e.addEventListener("input",()=>this.updatePreview()),e.addEventListener("change",()=>this.updatePreview())});const e=document.getElementById("podloom_rss_description_limit");e&&(e.addEventListener("input",()=>this.updatePreview()),e.addEventListener("change",()=>this.updatePreview())),document.querySelectorAll(".typo-range").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.element;if(e.target.id.includes("font_size")){const n=document.getElementById(t+"_font_size_value");n&&(n.value=e.target.value)}else if(e.target.id.includes("line_height")){const n=document.getElementById(t+"_line_height_value");n&&(n.value=e.target.value)}this.updatePreview()})}),document.querySelectorAll(".typo-size-value").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.element,n=document.getElementById(t+"_font_size_unit");if("px"===(n?.value||"px")){const n=document.getElementById(t+"_font_size_range");n&&(n.value=Math.min(72,Math.max(8,parseFloat(e.target.value)||16)))}})}),document.querySelectorAll(".typo-lineheight-value").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.element,n=document.getElementById(t+"_line_height_range");n&&(n.value=Math.min(3,Math.max(.5,parseFloat(e.target.value)||1.5)))})}),this.bindRangeSlider("podloom_rss_border_width"),this.bindRangeSlider("podloom_rss_border_radius"),this.bindRangeSlider("podloom_rss_funding_font_size"),this.bindRangeSlider("podloom_rss_funding_border_radius"),["podloom_rss_border_color","podloom_rss_border_width_value","podloom_rss_border_style","podloom_rss_border_radius_value"].forEach(e=>{const t=document.getElementById(e);t&&(t.addEventListener("input",()=>this.updatePreview()),t.addEventListener("change",()=>this.updatePreview()))}),["podloom_rss_funding_font_family","podloom_rss_funding_font_size_value","podloom_rss_funding_background_color","podloom_rss_funding_text_color","podloom_rss_funding_border_radius_value"].forEach(e=>{const t=document.getElementById(e);t&&(t.addEventListener("input",()=>this.updatePreview()),t.addEventListener("change",()=>this.updatePreview()))})},bindRangeSlider:function(e){const t=document.getElementById(e+"_range"),n=document.getElementById(e+"_value")||document.getElementById(e);t&&n&&(t.addEventListener("input",()=>{n.value=t.value,this.updatePreview()}),n.addEventListener("input",()=>{const e=parseFloat(n.value)||0,o=parseFloat(t.min)||0,d=parseFloat(t.max)||100;t.value=Math.min(d,Math.max(o,e))}))},bindDisplayToggles:function(){["title","date","duration","description"].forEach(e=>{const t=document.getElementById(`podloom_rss_display_${e}`);t&&t.addEventListener("change",()=>{this.updateSectionVisibility(),this.updatePreview()})});const e=document.getElementById("podloom_rss_display_artwork");e&&e.addEventListener("change",()=>{this.updatePreview()});const t=document.getElementById("podloom_rss_minimal_styling");t&&(t.addEventListener("change",()=>{this.toggleTypographySettings()}),this.toggleTypographySettings())},toggleTypographySettings:function(){const e=document.getElementById("podloom_rss_minimal_styling"),t=document.querySelector(".typography-settings-container"),n=document.getElementById("color-palette-section"),o=document.getElementById("minimal-styling-notice");e&&t&&(e.checked?(t.style.display="none",n&&(n.style.display="none"),o&&(o.style.display="block")):(t.style.display="",n&&(n.style.display=""),o&&(o.style.display="none")))},updateSectionVisibility:function(){["title","date","duration","description"].forEach(e=>{const t=document.getElementById(`podloom_rss_display_${e}`),n=document.getElementById(`${e}_typography_section`);t&&n&&(n.style.display=t.checked?"":"none")})},updatePreview:function(){const e=document.getElementById("rss_background_color")?.value||"#f9f9f9",t=document.getElementById("rss-episode-preview");t&&(t.style.background=e);const n=document.getElementById("podloom_rss_display_artwork"),o=document.getElementById("preview-artwork");n&&o&&(o.style.display=n.checked?"block":"none");const d=document.getElementById("podloom_rss_display_date"),i=document.getElementById("podloom_rss_display_duration"),s=document.getElementById("preview-meta");d&&i&&s&&(d.checked||i.checked?s.style.display="flex":s.style.display="none");const l=document.getElementById("podloom_rss_display_description"),a=document.querySelector(".rss-episode-audio");if(l&&a&&(l.checked?a.style.marginBottom="15px":a.style.marginBottom="0"),["title","date","duration","description"].forEach(e=>{const t=document.getElementById("preview-"+e);if(!t)return;const n=document.getElementById(`podloom_rss_display_${e}`);if(n&&(t.style.display=n.checked?"":"none"),"description"===e){const e=document.getElementById("podloom_rss_description_limit"),n=e?parseInt(e.value):0,o="This is a sample episode description. It gives listeners an overview of what the episode is about and what they can expect to learn.";if(n>0&&o.length>n){let e=o.substring(0,n);const d=e.lastIndexOf(" ");d>.8*n&&(e=e.substring(0,d)),t.innerHTML="<p>"+e+"â€¦</p>"}else t.innerHTML="<p>"+o+"</p>"}const o=document.getElementById(e+"_font_family")?.value||"inherit",d=(document.getElementById(e+"_font_size_value")?.value||"16")+(document.getElementById(e+"_font_size_unit")?.value||"px"),i=document.getElementById(e+"_line_height_value")?.value||"1.5",s=document.getElementById(e+"_color")?.value||"#000000",l=document.getElementById(e+"_font_weight")?.value||"normal";t.style.fontFamily=o,t.style.fontSize=d,t.style.lineHeight=i,t.style.color=s,t.style.fontWeight=l}),t){const e=document.getElementById("podloom_rss_border_color")?.value||"#dddddd",n=(document.getElementById("podloom_rss_border_width_value")?.value||"1")+"px",o=document.getElementById("podloom_rss_border_style")?.value||"solid",d=(document.getElementById("podloom_rss_border_radius_value")?.value||"8")+"px";t.style.border=`${n} ${o} ${e}`,t.style.borderRadius=d}const r=document.getElementById("preview-funding-button");if(r){const e=document.getElementById("podloom_rss_funding_font_family")?.value||"inherit",t=(document.getElementById("podloom_rss_funding_font_size_value")?.value||"13")+"px",n=document.getElementById("podloom_rss_funding_background_color")?.value||"#2271b1",o=document.getElementById("podloom_rss_funding_text_color")?.value||"#ffffff",d=(document.getElementById("podloom_rss_funding_border_radius_value")?.value||"4")+"px";r.style.fontFamily=e,r.style.fontSize=t,r.style.backgroundColor=n,r.style.color=o,r.style.borderRadius=d}}};window.podloomTypographyManager=e}();