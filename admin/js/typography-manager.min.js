!function(){"use strict";const e={init:function(){this.parseExistingValues(),this.bindEvents(),this.bindDisplayToggles(),this.updatePreview(),this.updateSectionVisibility()},parseExistingValues:function(){const e={title:"24px",date:"14px",duration:"14px",description:"16px"};["title","date","duration","description"].forEach(t=>{const o=document.getElementById(t+"_font_size");if(o){let n=o.value||e[t];if(n&&n.includes("em")){const e=n.match(/^([\d.]+)em$/i);if(e){const t=parseFloat(e[1]);n=Math.round(16*t)+"px",o.value=n}}const d=n.match(/^([\d.]+)([a-z%]*)$/i);if(d){const e=parseFloat(d[1]),o=d[2]||"px",n=document.getElementById(t+"_font_size_value"),s=document.getElementById(t+"_font_size_unit"),l=document.getElementById(t+"_font_size_range");n&&(n.value=e),s&&(s.value=o),l&&"px"===o&&(l.value=Math.min(72,Math.max(8,e)))}o.remove()}const n=document.getElementById(t+"_line_height");if(n){const e=parseFloat(n.value)||1.5,o=document.getElementById(t+"_line_height_value"),d=document.getElementById(t+"_line_height_range");o&&(o.value=e),d&&(d.value=e),n.remove()}})},bindEvents:function(){document.querySelectorAll(".typo-control").forEach(e=>{e.addEventListener("input",()=>this.updatePreview()),e.addEventListener("change",()=>this.updatePreview())});const e=document.getElementById("podloom_rss_description_limit");e&&(e.addEventListener("input",()=>this.updatePreview()),e.addEventListener("change",()=>this.updatePreview())),document.querySelectorAll(".typo-range").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.element;if(e.target.id.includes("font_size")){const o=document.getElementById(t+"_font_size_value");o&&(o.value=e.target.value)}else if(e.target.id.includes("line_height")){const o=document.getElementById(t+"_line_height_value");o&&(o.value=e.target.value)}this.updatePreview()})}),document.querySelectorAll(".typo-size-value").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.element,o=document.getElementById(t+"_font_size_unit");if("px"===(o?.value||"px")){const o=document.getElementById(t+"_font_size_range");o&&(o.value=Math.min(72,Math.max(8,parseFloat(e.target.value)||16)))}})}),document.querySelectorAll(".typo-lineheight-value").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.element,o=document.getElementById(t+"_line_height_range");o&&(o.value=Math.min(3,Math.max(.5,parseFloat(e.target.value)||1.5)))})}),this.bindRangeSlider("podloom_rss_border_width"),this.bindRangeSlider("podloom_rss_border_radius"),this.bindRangeSlider("podloom_rss_funding_font_size"),this.bindRangeSlider("podloom_rss_funding_border_radius"),["podloom_rss_border_color","podloom_rss_border_width_value","podloom_rss_border_style","podloom_rss_border_radius_value"].forEach(e=>{const t=document.getElementById(e);t&&(t.addEventListener("input",()=>this.updatePreview()),t.addEventListener("change",()=>this.updatePreview()))}),["podloom_rss_funding_font_family","podloom_rss_funding_font_size_value","podloom_rss_funding_background_color","podloom_rss_funding_text_color","podloom_rss_funding_border_radius_value"].forEach(e=>{const t=document.getElementById(e);t&&(t.addEventListener("input",()=>this.updatePreview()),t.addEventListener("change",()=>this.updatePreview()))})},bindRangeSlider:function(e){const t=document.getElementById(e+"_range"),o=document.getElementById(e+"_value")||document.getElementById(e);t&&o&&(t.addEventListener("input",()=>{o.value=t.value,this.updatePreview()}),o.addEventListener("input",()=>{const e=parseFloat(o.value)||0,n=parseFloat(t.min)||0,d=parseFloat(t.max)||100;t.value=Math.min(d,Math.max(n,e))}))},bindDisplayToggles:function(){["title","date","duration","description"].forEach(e=>{const t=document.getElementById(`podloom_rss_display_${e}`);t&&t.addEventListener("change",()=>{this.updateSectionVisibility(),this.updatePreview()})});const e=document.getElementById("podloom_rss_display_artwork");e&&e.addEventListener("change",()=>{this.updatePreview()});const t=document.getElementById("podloom_rss_minimal_styling");t&&(t.addEventListener("change",()=>{this.toggleTypographySettings()}),this.toggleTypographySettings())},toggleTypographySettings:function(){const e=document.getElementById("podloom_rss_minimal_styling"),t=document.querySelector(".typography-settings-container"),o=document.getElementById("color-palette-section"),n=document.getElementById("minimal-styling-notice");e&&t&&(e.checked?(t.style.display="none",o&&(o.style.display="none"),n&&(n.style.display="block")):(t.style.display="",o&&(o.style.display=""),n&&(n.style.display="none")))},updateSectionVisibility:function(){["title","date","duration","description"].forEach(e=>{const t=document.getElementById(`podloom_rss_display_${e}`),o=document.getElementById(`${e}_typography_section`);t&&o&&(o.style.display=t.checked?"":"none")})},updatePreview:function(){const e=document.getElementById("rss_background_color")?.value||"#f9f9f9",t=document.getElementById("rss-episode-preview");t&&(t.style.background=e);const o=document.getElementById("podloom_rss_display_artwork"),n=document.getElementById("preview-artwork");o&&n&&(n.style.display=o.checked?"block":"none");const d=document.getElementById("podloom_rss_display_date"),s=document.getElementById("podloom_rss_display_duration"),l=document.getElementById("preview-meta");d&&s&&l&&(d.checked||s.checked?l.style.display="flex":l.style.display="none");const i=document.getElementById("podloom_rss_display_description"),r=document.querySelector(".podloom-player-container");if(i&&r&&(i.checked?r.style.marginBottom="15px":r.style.marginBottom="0"),r&&e){const t=this.calculatePlayerColors(e);r.style.setProperty("--podloom-player-btn-bg",t.btnBg),r.style.setProperty("--podloom-player-btn-icon",t.btnIcon),r.style.setProperty("--podloom-player-btn",t.btnBg),r.style.setProperty("--podloom-player-timeline",t.timeline),r.style.setProperty("--podloom-player-progress",t.progress),r.style.setProperty("--podloom-player-control",t.control),r.style.setProperty("--podloom-player-time",t.time),r.style.setProperty("--podloom-player-speed-bg",t.speedBg),r.style.setProperty("--podloom-player-speed-border",t.speedBorder),r.style.setProperty("--podloom-player-text",t.text)}if(["title","date","duration","description"].forEach(e=>{const t=document.getElementById("preview-"+e);if(!t)return;const o=document.getElementById(`podloom_rss_display_${e}`);if(o&&(t.style.display=o.checked?"":"none"),"description"===e){const e=document.getElementById("podloom_rss_description_limit"),o=e?parseInt(e.value):0,n="This is a sample episode description. It gives listeners an overview of what the episode is about and what they can expect to learn.";if(o>0&&n.length>o){let e=n.substring(0,o);const d=e.lastIndexOf(" ");d>.8*o&&(e=e.substring(0,d)),t.innerHTML="<p>"+e+"â€¦</p>"}else t.innerHTML="<p>"+n+"</p>"}const n=document.getElementById(e+"_font_family")?.value||"inherit",d=(document.getElementById(e+"_font_size_value")?.value||"16")+(document.getElementById(e+"_font_size_unit")?.value||"px"),s=document.getElementById(e+"_line_height_value")?.value||"1.5",l=document.getElementById(e+"_color")?.value||"#000000",i=document.getElementById(e+"_font_weight")?.value||"normal";t.style.fontFamily=n,t.style.fontSize=d,t.style.lineHeight=s,t.style.color=l,t.style.fontWeight=i}),t){const e=document.getElementById("podloom_rss_border_color")?.value||"#dddddd",o=(document.getElementById("podloom_rss_border_width_value")?.value||"1")+"px",n=document.getElementById("podloom_rss_border_style")?.value||"solid",d=(document.getElementById("podloom_rss_border_radius_value")?.value||"8")+"px";t.style.border=`${o} ${n} ${e}`,t.style.borderRadius=d}const a=document.getElementById("preview-funding-button");if(a){const e=document.getElementById("podloom_rss_funding_font_family")?.value||"inherit",t=(document.getElementById("podloom_rss_funding_font_size_value")?.value||"13")+"px",o=document.getElementById("podloom_rss_funding_background_color")?.value||"#2271b1",n=document.getElementById("podloom_rss_funding_text_color")?.value||"#ffffff",d=(document.getElementById("podloom_rss_funding_border_radius_value")?.value||"4")+"px";a.style.fontFamily=e,a.style.fontSize=t,a.style.backgroundColor=o,a.style.color=n,a.style.borderRadius=d}},calculatePlayerColors:function(e){const t=e=>(e=e.replace("#",""),{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}),o=(e,o)=>{const n=t(e);return"#"+[Math.min(255,Math.round(n.r+(255-n.r)*(o/100))),Math.min(255,Math.round(n.g+(255-n.g)*(o/100))),Math.min(255,Math.round(n.b+(255-n.b)*(o/100)))].map(e=>e.toString(16).padStart(2,"0")).join("")},n=(e,o)=>{const n=t(e);return"#"+[Math.max(0,Math.round(n.r-n.r*(o/100))),Math.max(0,Math.round(n.g-n.g*(o/100))),Math.max(0,Math.round(n.b-n.b*(o/100)))].map(e=>e.toString(16).padStart(2,"0")).join("")},d=(e=>.2126*(e.r/255)+.7152*(e.g/255)+.0722*(e.b/255))(t(e));return d<.5?{btnBg:o(e,60),btnIcon:o(e,95),timeline:o(e,25),progress:o(e,60),control:o(e,50),time:o(e,45),speedBg:o(e,15),speedBorder:o(e,30),text:o(e,70)}:{btnBg:n(e,75),btnIcon:"#ffffff",timeline:n(e,10),progress:n(e,75),control:n(e,50),time:n(e,40),speedBg:"#ffffff",speedBorder:n(e,20),text:n(e,70)}}};window.podloomTypographyManager=e}();